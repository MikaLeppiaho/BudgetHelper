(this.webpackJsonpbudgethelper=this.webpackJsonpbudgethelper||[]).push([[0],{46:function(e,t,a){},64:function(e,t,a){e.exports=a(99)},69:function(e,t,a){},76:function(e,t,a){},78:function(e,t,a){},97:function(e,t,a){},98:function(e,t,a){},99:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(23),u=a.n(c),l=a(17),o=(a(69),a(7)),s=a(104),i=a(106),m=a(101),p=a(102),d=a(35),f=(a(76),a(8)),E=(a(46),Object(n.createContext)(null)),g=function(){return Object(n.useContext)(E)},v=a(5),b=a.n(v),h=a(6),w=a(105),x=(a(78),a(12)),y=a.n(x),O=null,j={setToken:function(e){O="bearer ".concat(e)},getDailyBudget:function(){var e=Object(h.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:O}},e.next=3,y.a.get("/api/dailybudget",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),updateDailyBudget:function(){var e=Object(h.a)(b.a.mark((function e(t,a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={headers:{Authorization:O}},e.next=3,y.a.put("".concat("/api/dailybudget","/").concat(a),t,n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}()},k=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)(""),l=Object(o.a)(u,2),s=l[0],i=l[1],p=Object(n.useState)(""),d=Object(o.a)(p,2),f=d[0],E=d[1],v=g().isAuthenticated;Object(n.useEffect)((function(){v&&function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,j.getDailyBudget();case 2:t=e.sent,c(t),i(t.dailyBudget),console.log("Daily bug",v);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()()}),[v]);var x=function(){var e=Object(h.a)(b.a.mark((function e(t){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={dailyBudget:Number(t)},e.next=3,j.updateDailyBudget(n,a.id);case 3:r=e.sent,i((s-r.dailyBudget).toFixed(2));case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"messageStyle"},a?r.a.createElement(w.a,null,r.a.createElement(w.a.Group,{controlId:"formDailyBudgetAmount"},r.a.createElement(w.a.Label,null,"Your budget for today:"),r.a.createElement("p",null,s)),r.a.createElement(w.a.Group,{controlId:"formDailyBudgetInput"},r.a.createElement(w.a.Label,null,"Add a new expense"),r.a.createElement(w.a.Control,{className:"formControl",type:"Number",value:f,onChange:function(e){return E(e.target.value)},placeholder:"\u20ac"}),r.a.createElement(w.a.Text,{className:"text-muted"},"Did you buy anything? Add the amount here")),r.a.createElement(w.a.Group,{controlId:"formDailyBudgetSubtract"},r.a.createElement(m.a,{variant:"primary",onClick:function(){return x(f)}},"Subtract"))):r.a.createElement("p",null,"You haven't set your budgetsettings. Check the Settings tab!"))},S=function(){return r.a.createElement("div",null,r.a.createElement("p",null,"A simple Single Page app built with React to help you handle your daily budget"))},C=function(){var e=g().isAuthenticated;return console.log("isAuth",e),r.a.createElement("div",{className:"Home"},r.a.createElement("div",{className:"lander"},r.a.createElement("h1",null,"Budget helper"),e?r.a.createElement(k,null):r.a.createElement(S,null)))},N=(a(97),function(){return r.a.createElement("div",{className:"NotFound"},r.a.createElement("h3",null," Sorry, page not found! :("))}),B=a(56),I=a(58),L=a(57),T={login:function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("/api/login",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},A=null,G={setToken:function(e){A="bearer ".concat(e)},addNewExpense:function(){var e=Object(h.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:A}},e.next=3,y.a.post("/api/expenses",t,a);case 3:return n=e.sent,e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeExpense:function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.delete("".concat("/api/expenses","/").concat(t));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},P=null,D=function(){var e=Object(h.a)(b.a.mark((function e(){var t,a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={headers:{Authorization:P}},e.next=3,y.a.get("/api/budgetsettings",t);case 3:return a=e.sent,e.abrupt("return",a.data);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),U={setToken:function(e){P="bearer ".concat(e)},postBudgetSetting:function(){var e=Object(h.a)(b.a.mark((function e(t){var a,n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={headers:{Authorization:P}},n=y.a.post("/api/budgetsettings",t,a),e.abrupt("return",n.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getBudgetSetting:D},R=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)(""),l=Object(o.a)(u,2),s=l[0],i=l[1],p=g().userHasAuthenticated,d=Object(f.k)(),E=function(){var e=Object(h.a)(b.a.mark((function e(t){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.preventDefault(),e.prev=1,e.next=4,T.login({username:a,password:s});case 4:return n=e.sent,console.log(n),window.localStorage.setItem("BudgetUser",JSON.stringify(n)),U.setToken(n.token),G.setToken(n.token),j.setToken(n.token),c(""),i(""),e.next=14,p(!0);case 14:d.push("/"),e.next=19;break;case 17:e.prev=17,e.t0=e.catch(1);case 19:case"end":return e.stop()}}),e,null,[[1,17]])})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"Login"},r.a.createElement("form",{onSubmit:E},r.a.createElement(B.a,{controlId:"username"},r.a.createElement(I.a,null,"username"),r.a.createElement(L.a,{autoFocus:!0,type:"text",value:a,onChange:function(e){return c(e.target.value)}})),r.a.createElement(B.a,{controlId:"password"},r.a.createElement(I.a,null,"password"),r.a.createElement(L.a,{type:"password",value:s,onChange:function(e){return i(e.target.value)}})),r.a.createElement(m.a,{block:!0,disabled:!(a.length>0&&s.length),type:"submit"},"Login")))},F=a(59),H=function(e){var t=e.submitNewBudgetSetting,a=e.addNewExpense,c=Object(n.useState)(""),u=Object(o.a)(c,2),l=u[0],s=u[1],i=Object(n.useState)(0),p=Object(o.a)(i,2),d=p[0],f=p[1],E=Object(n.useState)(""),g=Object(o.a)(E,2),v=g[0],b=g[1],h=Object(n.useState)(0),x=Object(o.a)(h,2),y=x[0],O=x[1];return r.a.createElement("div",null,r.a.createElement(w.a,null,r.a.createElement(w.a.Row,{className:"align-items-center"},r.a.createElement(w.a.Group,{as:F.a,controlId:"formGridIncome"},r.a.createElement(w.a.Label,null,"Monthly Income"),r.a.createElement(w.a.Control,{type:"Number",value:l,onChange:function(e){s(e.target.value)},placeholder:"Enter monthly income"}),r.a.createElement(w.a.Text,{className:"text-muted"},"Enter monthly income")),r.a.createElement(w.a.Group,{as:F.a,controlId:"formBasicRangeCustom"},r.a.createElement(w.a.Label,null,"Savings % ",y),r.a.createElement(w.a.Control,{type:"range",name:"volName",value:y,min:"0",max:"100",custom:!0,onChange:function(e){O(e.target.value)}}),r.a.createElement(w.a.Text,{className:"text-muted"},"How much would you want to save from you income")),r.a.createElement(w.a.Group,{as:F.a,controlId:"formGridSubmit"},r.a.createElement(m.a,{variant:"primary",onClick:function(){return t(l,y)}},"Submit"))),r.a.createElement(w.a.Row,{className:"align-items-center"},r.a.createElement(w.a.Label,null,"Monthly expenses")),r.a.createElement(w.a.Row,{className:"align-items-center"},r.a.createElement(w.a.Group,{as:F.a,controlId:"formExpenseDescription"},r.a.createElement(w.a.Label,null,"description"),r.a.createElement(w.a.Control,{type:"text",value:v,onChange:function(e){b(e.target.value)},placeholder:"Enter expense description"}),r.a.createElement(w.a.Text,{className:"text-muted"},"Enter monthly expense description (Rent etc.)")),r.a.createElement(w.a.Group,{as:F.a,controlId:"formExpenseAmount"},r.a.createElement(w.a.Label,null,"amount"),r.a.createElement(w.a.Control,{type:"number",value:d,onChange:function(e){f(e.target.value)},placeholder:"Enter expense amount"}),r.a.createElement(w.a.Text,{className:"text-muted"},"Enter monthly expenses amount (Rent etc.)")),r.a.createElement(w.a.Group,{as:F.a,controlId:"formExpenseSubmit"},r.a.createElement(m.a,{variant:"primary",onClick:function(){return a(v,d)}},"Submit")))))},z=a(103),M=a(42),q=(a(98),function(e){var t=e.settings,a=e.removeExpense;return r.a.createElement("div",null,r.a.createElement("h3",null,"Expenses"),r.a.createElement(M.a,null,t.map((function(e){return r.a.createElement(M.a.Item,{key:e.id},r.a.createElement(p.a,null,r.a.createElement(z.a,null,r.a.createElement(F.a,null,e.description),r.a.createElement(F.a,{xs:10},e.amount," \u20ac"),r.a.createElement(m.a,{onClick:function(){return a(e.id)}},"X"))))}))))}),J=function(e){var t=e.income,a=e.savings;return r.a.createElement("div",null,r.a.createElement("h3",null,"Income"),r.a.createElement(p.a,null,r.a.createElement(z.a,null,r.a.createElement(F.a,null,"Monthly income"),r.a.createElement(F.a,null,"Savings goal")),r.a.createElement(z.a,null,r.a.createElement(F.a,null,t," \u20ac"),r.a.createElement(F.a,null,100*a," %"))))},Y=function(){var e=Object(n.useState)(""),t=Object(o.a)(e,2),a=t[0],c=t[1],u=Object(n.useState)([]),l=Object(o.a)(u,2),s=l[0],i=l[1],m=Object(n.useState)(!1),p=Object(o.a)(m,2),d=p[0],f=p[1];Object(n.useEffect)((function(){var e=!0;return e&&function(){var e=Object(h.a)(b.a.mark((function e(){var t;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,U.getBudgetSetting();case 2:t=e.sent,c(t),i(t.expenses),console.log("expenses with effect: ",s);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),function(){return e=!1}}),[d]);var E=function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,f(!0),e.next=4,G.removeExpense(t);case 4:f(!1),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}(),g=function(){var e=Object(h.a)(b.a.mark((function e(t,a){var n;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={income:t,savings:a/100},e.next=3,U.postBudgetSetting(n);case 3:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),v=function(){var e=Object(h.a)(b.a.mark((function e(t,a){var n,r;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={description:t,amount:a/1},e.next=3,G.addNewExpense(n);case 3:r=e.sent,i(s.concat(r)),console.log("Updated",s);case 6:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}();return r.a.createElement("div",{className:"Settings"},r.a.createElement("h1",null,"Manage your daily budget"),r.a.createElement("p",null,"Add your income and expenses"),r.a.createElement(H,{submitNewBudgetSetting:g,addNewExpense:v}),a?r.a.createElement("div",null,r.a.createElement(J,{income:a.income,savings:a.savings}),r.a.createElement(q,{settings:s,removeExpense:E})):r.a.createElement(r.a.Fragment,null,"loading..."))},V=a(30),X=a(40),$=function(e,t){var a=Object(n.useState)({username:"",email:"",password:"",confirmPassword:""}),r=Object(o.a)(a,2),c=r[0],u=r[1],l=Object(n.useState)({}),s=Object(o.a)(l,2),i=s[0],m=s[1],p=Object(n.useState)(!1),d=Object(o.a)(p,2),f=d[0],E=d[1];return Object(n.useEffect)((function(){0===Object.keys(i).length&&f&&e()}),[i]),{handleChange:function(e){var t=e.target,a=t.name,n=t.value;u(Object(X.a)(Object(X.a)({},c),{},Object(V.a)({},a,n)))},handleSubmit:function(e){e.preventDefault(),m(t(c)),E(!0)},values:c,errors:i}},K=function(e){var t={};return e.username?e.username.length<3&&(t.username="username needs to be three or more characters long"):t.username="username is required",e.email?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(t.email="email is invalid"):t.email="email is required",e.password?e.password.length<6&&(t.password="password needs to be six or more characters long"):t.password="password is required",e.confirmPassword?e.password!==e.confirmPassword&&(t.confirmPassword="Passwords must match"):t.confirmPassword="Password confirmation is required",t},Q=function(e){var t=e.createUser,a=$((function(){var e={username:u.username.trim(),email:u.email.trim(),password:u.password};t(e)}),K),n=a.handleChange,c=a.handleSubmit,u=a.values,l=a.errors;return r.a.createElement("div",null,r.a.createElement(w.a,{noValidate:!0,onSubmit:c},r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Label,null,"Username"),r.a.createElement(w.a.Control,{name:"username",type:"text",value:u.username,onChange:n}),r.a.createElement(w.a.Text,{className:"text-muted"},l.username&&r.a.createElement("p",null,l.username))),r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Label,null,"email"),r.a.createElement(w.a.Control,{name:"email",type:"email",value:u.email,onChange:n,placeholder:"email@address.com"}),r.a.createElement(w.a.Text,{className:"text-muted"},l.email&&r.a.createElement("p",null,l.email))),r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Label,null,"password"),r.a.createElement(w.a.Control,{name:"password",type:"password",value:u.password,onChange:n,placeholder:"password"}),r.a.createElement(w.a.Text,{className:"text-muted"},l.password&&r.a.createElement("p",null,l.password))),r.a.createElement(w.a.Group,null,r.a.createElement(w.a.Label,null,"confirm password"),r.a.createElement(w.a.Control,{name:"confirmPassword",type:"password",value:u.confirmPassword,onChange:n,placeholder:"confirm password"}),r.a.createElement(w.a.Text,{className:"text-muted"},l.confirmPassword&&r.a.createElement("p",null,l.confirmPassword))),r.a.createElement(m.a,{variant:"primary",type:"submit"},"Sign up")))},W={newUser:function(){var e=Object(h.a)(b.a.mark((function e(t){var a;return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,y.a.post("/api/users",t);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Z=function(){var e=function(){var e=Object(h.a)(b.a.mark((function e(t){return b.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(t),e.next=3,W.newUser(t);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return r.a.createElement("div",null,r.a.createElement(Q,{createUser:e}))},_=function(){return r.a.createElement(f.g,null,r.a.createElement(f.d,{exact:!0,path:"/"},r.a.createElement(C,null)),r.a.createElement(f.d,{exact:!0,path:"/login"},r.a.createElement(R,null)),r.a.createElement(f.d,{exact:!0,path:"/signup"},r.a.createElement(Z,null)),r.a.createElement(f.d,{exact:!0,path:"/settings"},r.a.createElement(Y,null)),r.a.createElement(f.d,null,r.a.createElement(N,null)))},ee=function(){var e=Object(n.useState)(!1),t=Object(o.a)(e,2),a=t[0],c=t[1];Object(n.useEffect)((function(){var e=window.localStorage.getItem("BudgetUser");if(e){var t=JSON.parse(e);c(!0),U.setToken(t.token),G.setToken(t.token),j.setToken(t.token)}}),[]);return r.a.createElement("div",null,r.a.createElement(s.a,{bg:"light"},r.a.createElement(s.a.Brand,null,r.a.createElement(l.Link,{to:"/"},"Home")),r.a.createElement(i.a,{className:"container-fluid"},a?r.a.createElement(r.a.Fragment,null,r.a.createElement(d.LinkContainer,{to:"/settings"},r.a.createElement(i.a.Item,null,r.a.createElement(i.a.Link,{href:"/settings"},"Settings"))),r.a.createElement(m.a,{className:"ml-auto",onClick:function(){c(!1),window.localStorage.removeItem("BudgetUser")}}," ","Logout"," ")):r.a.createElement(r.a.Fragment,null,r.a.createElement(d.LinkContainer,{to:"/signup"},r.a.createElement(i.a.Item,{className:"ml-auto"},r.a.createElement(i.a.Link,{href:"/signup"},"Signup"))),r.a.createElement(d.LinkContainer,{to:"/login"},r.a.createElement(i.a.Item,null,r.a.createElement(i.a.Link,{href:"/login"},"Login")))))),r.a.createElement(p.a,null,r.a.createElement(E.Provider,{value:{isAuthenticated:a,userHasAuthenticated:c}},r.a.createElement(_,null))),r.a.createElement("footer",null,"BudgetHelper, Mika Leppiaho 2020 "))};u.a.render(r.a.createElement(l.BrowserRouter,null,r.a.createElement(ee,null)),document.getElementById("root"))}},[[64,1,2]]]);
//# sourceMappingURL=main.c9734ce1.chunk.js.map